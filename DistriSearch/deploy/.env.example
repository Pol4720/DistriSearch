# =============================================================================
# DistriSearch Docker Compose - Configuración de Variables de Entorno
# =============================================================================
# Copia este archivo como .env en el directorio deploy/

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE RED EXTERNA
# -----------------------------------------------------------------------------

# IMPORTANTE: Reemplaza con la IP de tu máquina en la red local
# Encuentra tu IP con: ipconfig (Windows) o ifconfig/ip addr (Linux/Mac)
EXTERNAL_IP=192.168.1.100

# URL pública del backend (usa tu IP de red)
PUBLIC_URL=http://192.168.1.100:8000

# URL del backend para el frontend (puede usar nombre del servicio internamente)
DISTRISEARCH_BACKEND_URL=http://backend:8000

# URL pública del backend para enlaces de descarga (usa tu IP de red)
DISTRISEARCH_BACKEND_PUBLIC_URL=http://192.168.1.100:8000

# URL del backend para los agentes (puede usar nombre del servicio internamente)
BACKEND_URL=http://backend:8000

# -----------------------------------------------------------------------------
# CONFIGURACIÓN SSL/TLS (HTTPS)
# -----------------------------------------------------------------------------

# Habilitar HTTPS (true/false)
ENABLE_SSL=true

# Habilitar SSL en agentes (true/false)
AGENT_SSL_ENABLED=true

# Verificar certificados SSL (false para autofirmados)
VERIFY_SSL=true

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE PUERTOS
# -----------------------------------------------------------------------------

# Puerto del backend
BACKEND_PORT=8000

# -----------------------------------------------------------------------------
# SEGURIDAD
# -----------------------------------------------------------------------------

# API Key para operaciones administrativas (opcional)
ADMIN_API_KEY=
DISTRISEARCH_ADMIN_API_KEY=

# -----------------------------------------------------------------------------
# DHT (DISTRIBUTED HASH TABLE)
# -----------------------------------------------------------------------------

# Auto-iniciar DHT al arrancar el backend
DHT_AUTO_START=true

# Modo DHT: external (servicio separado) o inproc (dentro del backend)
# En Docker Compose se recomienda 'external' usando el servicio 'dht'
DHT_MODE=external

# URL del servicio DHT (solo si DHT_MODE=external)
# Usa el nombre del servicio Docker: dht
DHT_HTTP_URL=http://dht:8080

# Auto-unirse a seed DHT (opcional)
# Deja vacío para el primer nodo, o usa IP de otro nodo DHT
DHT_SEED_IP=
DHT_SEED_PORT=2000

# -----------------------------------------------------------------------------
# EJEMPLO: CONFIGURACIÓN CON HTTPS HABILITADO
# -----------------------------------------------------------------------------

# Para habilitar HTTPS, descomenta y ajusta lo siguiente:
# 1. Genera certificados: powershell ..\scripts\generate_ssl_certs.ps1 -Hostname 192.168.1.100
# 2. Actualiza estas variables:
# ENABLE_SSL=true
# AGENT_SSL_ENABLED=true
# PUBLIC_URL=https://192.168.1.100:8000
# DISTRISEARCH_BACKEND_PUBLIC_URL=https://192.168.1.100:8000
# 3. En docker-compose.yml, descomenta el puerto 8443 si lo usas
# 4. Ejecuta: docker-compose up -d --build

# NOTAS:
# - Los certificados deben estar en ../certs/ (relativo a docker-compose.yml)
# - Si no existe la carpeta certs, créala: mkdir ..\certs
# - Los contenedores montarán los certificados como solo lectura
# - Para producción, reemplaza con certificados válidos de Let's Encrypt
